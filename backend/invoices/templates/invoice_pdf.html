<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Invoice - {{ invoice.invoice_code }}</title>
    <style>
        body { background: #f9fafb; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; margin: 0; padding-bottom: 72px; }
        .container { max-width: 900px; margin: 40px auto; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.08); display: flex; flex-direction: column; min-height: 100vh; }
        .header, .footer { padding: 32px; }
        .footer { margin-top: auto; background: #f9fafb; border-top: 1px solid #eee; }
        .flex { display: flex; justify-content: space-between; align-items: flex-start; }
        .text-right { text-align: right; }
        .text-red { color: #991b1b; }
        .text-gray { color: #4b5563; }
        .section { padding: 32px; }
        .table { width: 100%; border-collapse: collapse; margin-bottom: 32px; }
        .table th, .table td { padding: 12px 8px; border-bottom: 1px solid #e5e7eb; font-size: 14px; }
        .table th { background: #f3f4f6; font-weight: 600; }
        .mb-2 { margin-bottom: 16px; }
        .mb-4 { margin-bottom: 32px; }

        /* Print/PDF settings */
        @page { size: A4; margin: 12mm; }
        html, body { height: auto; }
    </style>
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header">
            <div style="display:flex; justify-content:space-between; align-items:flex-start;">
                <div>
                    <div style="display:flex; align-items:center; gap:12px;">
                        <img src="{{ static_base }}/images/logo.png" style="height:52px; object-fit:contain;" alt="Zahara Flowers Logo">
                        <h1 class="text-red mb-2" style="font-size:2rem;font-weight:bold; margin:0;">Zahara Flowers Ltd</h1>
                    </div>
                    <div style="display:flex; justify-content:space-between; align-items:flex-start;">
                        <div class="text-gray" style="font-size:1rem;">www.zaharaflowers.com</div>
                        <div class="text-gray" style="font-size:1rem;">info@zaharaflowers.com</div>
                        <div class="text-gray" style="font-size:1rem;">+254 725 750 057</div>
                        <div class="text-right text-gray" style="font-size:1rem;">
                            <div>Nakuru & Laikipia, Kenya</div>
                            <div>TAX ID P052064981H</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 0;">

        <!-- INVOICE INFO -->
        <div class="section" style="padding-bottom:0;">
            <div class="flex mb-4" style="gap:2rem;">
                <div style="flex:1;">
                    <div style="font-weight:700; font-size:1rem; margin-bottom:4px;">Invoice</div>
                    <div style="color:#4b5563;">Invoice No: <strong>{{ invoice.invoice_code }}</strong></div>
                    <div style="color:#4b5563;">Date: {{ invoice.order.date|date:'Y-m-d' }}</div>
                </div>
                <div style="flex:1;">
                    <div style="font-weight:600; font-size:1rem; margin-bottom:0.5rem; margin-top: 0.5rem;">Account Details</div>
                    {% if invoice.order.currency == 'EUR' %}
                        <div style="color:#4b5563;">Acc No: (EURO Ac) 0112397355002</div>
                    {% elif invoice.order.currency == 'USD' %}
                        <div style="color:#4b5563;">Acc No: (USD Acc) 0112397355003</div>
                    {% elif invoice.order.currency == 'KSH' %}
                        <div style="color:#4b5563;">Acc No: (Ksh Acc.) 0112397355001</div>
                    {% else %}
                        <div style="color:#4b5563;">Acc No: (USD Acc) 0112397355003</div>
                    {% endif %}
                    <div style="color:#4b5563;">Bank Name: SBM Bank</div>
                    <div style="color:#4b5563;">Swift Code: SBMKKENAXXX</div>
                    <div style="color:#4b5563;">Bank Code: 60</div>
                    <div style="color:#4b5563;">Branch Code: 011</div>
                </div>
            </div>

            <div class="mb-4">
                <div style="font-weight:600; font-size:1rem; margin-bottom:0.5rem;">Consignee Details</div>
                <div style="color:#4b5563; margin-bottom:0.5rem;">{{ invoice.order.customer.name }}</div>
                <div style="color:#4b5563;">{% if invoice.order.branch %}{{ invoice.order.branch.name }}{% endif %}</div>
            </div>
            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 0;">

            <!-- ITEMS TABLE -->
            <table class="table">
                <thead>
                    <tr>
                        <th style="text-align:left;">ITEM DETAIL</th>
                        <th style="text-align:center;">LENGTH (CM)</th>
                        <th style="text-align:center;">PRICE PER STEM ({{ invoice.order.currency }})</th>
                        <th style="text-align:center;">STEMS PER BOX</th>
                        <th style="text-align:center;">NUMBER OF BOXES</th>
                        <th style="text-align:center;">TOTAL NUMBER OF STEMS</th>
                        <th style="text-align:right;">AMOUNT ({{ invoice.order.currency }})</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in invoice.order.items.all %}
                    <tr>
                        <td>{{ item.product.name }}</td>
                        <td style="text-align:center;">{{ item.stem_length_cm }}</td>
                        <td style="text-align:center;">{{ item.price_per_stem }}</td>
                        <td style="text-align:center;">{{ item.stems_per_box }}</td>
                        <td style="text-align:center;">{{ item.boxes }}</td>
                        <td style="text-align:center;">{{ item.stems }}</td>
                        <td style="text-align:right;">{{ item.total_amount }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <!-- TOTALS -->
            <div style="display:block; margin-left:auto; margin-bottom:2rem;">
                <div style="width:320px; background:#fafafa; border:1px solid #e5e7eb; border-radius:8px; padding:16px; box-shadow:0 2px 6px rgba(0,0,0,0.05);">

                <!-- Subtotal -->
                <div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #e5e7eb; font-size:14px;">
                    <span style="color:#374151;">Subtotal</span>
                    <span style="font-weight:500;">{{ invoice.order.currency }} {{ invoice.order.total_amount|floatformat:2 }}</span>
                </div>

                <!-- Logistics -->
                <div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #e5e7eb; font-size:14px;">
                    <span style="color:#374151;">Logistics / Other Charges</span>
                    <span style="font-weight:500;">{{ invoice.order.currency }} {{ invoice.order.logistics_cost|default_if_none:'0.00' }}</span>
                </div>

                <!-- Total -->
                <div style="display:flex; justify-content:space-between; padding:12px 0; border-top:2px solid #1f2937; font-size:16px; font-weight:bold; color:#111827;">
                    <span>Total</span>
                    <span>{{ invoice.order.currency }} {{ invoice.order.total_amount|floatformat:2 }}</span>
                </div>

                </div>
            </div>
        </div>

        <div class="footer" style="
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            text-align: center;
            background: #fff;
            padding: 10px 0;
            height: 60px;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);">
        <div style="font-weight:500; font-size:1rem;">We bloom for you</div>
        <div class="text-gray" style="font-size:12px; margin-top:4px;">www.zaharaflowers.com</div>
        </div>
    </div>
</body>
</html>
